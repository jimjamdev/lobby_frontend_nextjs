import type { NextPage } from 'next';
import Head from 'next/head';

import { Button } from '~components/atoms/Button';
import { Card } from '~components/molecules/Card';
import { useGetGamesQuery } from '~store/features/cms/games';

const Home: NextPage = () => {
  const {
    data: games,
    isLoading: isGamesLoading,
    error: gamesError,
  } = useGetGamesQuery({ page: 1 });

  console.log('games', games?.data);
  console.log('error', gamesError);
  const [one = {}, two = {}, three = {}] = games?.data || [];
  console.log('one', one, 'two', two, 'three', three);

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div>
        <Button colour="primary" onClick={() => alert('Clicked')}>primary button</Button>
        <Button colour="secondary">secondary button</Button>
        <Card>Hello card</Card>
      </div>

      <ul>
        {gamesError && <li>Error: {gamesError?.data?.error?.message}</li>}
        {isGamesLoading && <div>Loading...</div>}
        <li>{games && games?.meta?.pagination?.total} Results</li>
        {games?.data
          && games?.data?.map((game) => {
            console.log('**game', game);
            return <li key={game.id}>{game.name}</li>;
          })}
      </ul>
    </div>
  );
};

export default Home;
